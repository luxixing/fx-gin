## AI 开发助手指南

本项目是一个基于 Gin 和 Uber FX 构建的企业级 Go Web 项目脚手架。本文档提供了针对常见开发场景的提示模板，帮助开发者更高效地使用 AI 辅助开发。

### 通用开发提示模板

#### 1. 添加新功能模块

当你需要开发一个全新的功能模块时，可以使用以下提示：

```
我需要在 fx-gin 项目中实现一个[功能名称]模块。该模块的主要功能是[详细描述功能需求]。

请遵循项目的分层架构（domain、repo、service、handler）帮我实现这个功能：

1. 在 internal/domain 中定义领域模型和接口
2. 在 internal/repo 中实现数据访问层代码
3. 在 internal/service 中编写业务逻辑服务
4. 在 internal/transport/http/handler 中创建 HTTP 处理器
5. 在 internal/transport/http/router.go 中注册相关路由

请确保：
- 遵循 DDD 设计原则
- 使用依赖注入管理组件
- 添加必要的单元测试
- 更新 Swagger 文档
```

#### 2. 扩展现有功能

当你需要扩展现有功能时，可以使用：

```
我想扩展 fx-gin 项目中的[模块名称]功能，具体需要添加以下能力：[详细描述新增功能]。

请帮我修改以下几个方面：
1. 更新 internal/domain 中的模型和接口定义
2. 扩展现有的 repository 实现
3. 在 service 层添加新的业务逻辑
4. 在 handler 中创建新的 API 端点
5. 在 router.go 中注册新路由

请确保：
- 保持向后兼容性
- 添加适当的参数验证
- 更新相关文档
```

#### 3. 修复问题或优化代码

当你需要修复问题或优化代码时：

```
我在 fx-gin 项目的[模块名称]中发现了一个问题：[描述问题]。错误日志或行为是：[粘贴错误信息或描述异常行为]。

请帮我：
1. 分析可能的原因
2. 提供修复方案
3. 实现代码修复
4. 添加必要的测试用例
```

### 特定功能开发提示

#### 1. 添加新的数据模型和 CRUD 操作

```
请帮我在 fx-gin 项目中实现一个新的[模型名称]模型及其完整的 CRUD 操作。

需求：
- 模型字段: [列出模型字段及类型]
- 需要提供的 API: 创建、查询（单个/列表）、更新、删除
- 添加必要的参数验证
- 实现关联关系: [如果有，描述与其他模型的关系]

请确保：
- 在 internal/domain 中定义模型
- 实现相应的 repository 接口
- 添加数据库迁移脚本
- 更新 Swagger 文档
```

#### 2. 实现认证与授权功能

```
请帮我在 fx-gin 项目中实现 JWT 认证和基于角色的访问控制。

需求：
1. 使用 JWT 标准实现令牌生成和验证
2. 在 internal/transport/http/middleware 中创建认证中间件
3. 实现基于角色的授权检查
4. 为现有 API 端点添加权限控制

请确保：
- 使用安全的密钥管理
- 实现令牌刷新机制
- 添加必要的日志记录
```

#### 3. 添加缓存层

```
我想为 fx-gin 项目添加 Redis 缓存支持，主要用于缓存[具体数据类型]数据。

请帮我：
1. 在 internal/infra/cache 中创建缓存接口抽象
2. 实现 Redis 缓存提供程序
3. 在[指定服务]中集成缓存逻辑
4. 添加缓存失效和更新策略

请确保：
- 实现优雅的降级机制
- 添加缓存预热功能
- 实现缓存监控
```

#### 4. 数据库迁移和扩展

```
我需要将 fx-gin 项目从 SQLite 迁移到 PostgreSQL 数据库。

请帮我：
1. 更新 internal/infra/db 中的数据库配置
2. 修改现有的迁移脚本使其兼容 PostgreSQL
3. 调整查询语法以适应 PostgreSQL
4. 提供必要的索引和优化建议

请确保：
- 保持数据迁移的原子性
- 提供回滚机制
- 更新连接池配置
```

#### 5. 实现 API 文档更新

```
请帮我更新 fx-gin 项目中[模块名称]的 Swagger 文档注释。

新增的 API 端点是：[描述新 API]
请确保：
1. 添加适当的注释以生成完整的 Swagger 文档
2. 包含所有请求参数、响应模型和可能的错误码
3. 提供示例值
4. 更新 README.md 中的 API 说明
```

### 实用开发技巧

- **提供上下文信息**: 告诉 AI 你正在处理项目的哪个部分，以及与你的请求相关的现有代码文件。
- **分步请求**: 对于复杂功能，先请求设计方案，然后再请求具体实现。
- **指定参考模式**: 如"请参考用户模块的实现模式"，这样 AI 可以遵循项目一致的代码风格。
- **请求代码评审**: 可以请求 AI 审查你编写的代码，并提供优化建议。
- **关注性能**: 在实现新功能时，注意考虑性能影响，必要时添加性能测试。
- **保持文档同步**: 确保代码变更时同步更新相关文档。

通过以上模板和技巧，你可以更有效地利用 AI 助手加速 fx-gin 项目的开发过程。记住，AI 助手是帮助你提高开发效率的工具，但最终的代码质量和架构决策仍需要开发者的专业判断。